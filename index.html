<!DOCTYPE html>
  <html>
  <head>
    <title>Create a Map</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=7,IE=9" />
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no">
    <link rel="stylesheet" type="text/css" href="http://serverapi.arcgisonline.com/jsapi/arcgis/3.4/js/esri/css/esri.css" />
  
    <script type="text/javascript">djConfig = { parseOnLoad:true };</script>
  
    <script type="text/javascript" src="http://serverapi.arcgisonline.com/jsapi/arcgis/3.4/"></script>
    <style>
    html,body,#mapDiv,.map.container{
      padding:0;
      margin:0;
      height:100%;
    }
    #legendDiv{
      background-color: #fff;
      position: absolute !important;
      z-index: 99;
      top:10px;
      right:20px;
    }
    </style>
    <script type="text/javascript">
      dojo.require("esri.map");
      dojo.require("esri.arcgis.utils");
      dojo.require("esri.dijit.Legend");
      function init(){
        var webmapid = '1a40fa5cc1ab4569b79f45444d728067';
        esri.arcgis.utils.createMap(webmapid,'mapDiv').then(function(response){
      map = response.map;
      
      var legend = new esri.dijit.Legend({
        map:map,
        layerInfos:(esri.arcgis.utils.getLegendLayers(response))
      },"legendDiv");
      legend.startup(); 
     });  
      }
  
      dojo.addOnLoad(init);
    </script>
    <body>
    <div id="mapDiv"></div>
    <div id="legendDiv"></div>
    </body>
  </head>

  </html>
